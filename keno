#include "pch.h"
#include <iostream>
#include <iomanip>
#include <vector>
#include <ctime>

using namespace std;

double pickNumbers(int, double);
int getBet();
void showBoard();
int getDifficulty();

double bank = 50;

int main()
{
	cout << "Keno is a game of chance, after you place a bet you pick numbers from the interval 1-100.\nNext, the computer randomly picks the same amount of numbers you are paid\nout based on how many numbers are the same between you and the computer.\n\n";
	int bet = 0;
	while (bet != -1) {
		int diff = getDifficulty();
		bet = getBet();
		showBoard();
		int money = pickNumbers(diff, bet);
		if (money > 0)
			cout << "\nYou earned $" << money << " You now have $" << bank << endl;
		if (money < 0)
			cout << "\nYou lost $" << money << " You now have $" << bank << endl;
	}
	system("pause");
}

double pickNumbers(int num, double bet) {

	cout << "Pick your " << num << " numbers to play: ";

	vector<int> playerChoice;
	for (int i = 0; i < num; i++) {
		int error = 0;
		char ch;
		cin >> ch;
		while (isdigit(ch) == false && ch > 100) {
			cout << "Please enter a number between 0 and 100";
			cin >> ch;
		}
		for (int a : playerChoice)
		{
			if (a == ch)
			{
				cout << "Please enter a number that you have not already chosen";
				cin >> ch;
			}
		}
		cin.putback(ch);
		int choice;
		cin >> choice;
		for (int a : playerChoice)
		{
			if (a == choice)
			{
				cout << "Please enter a number that you have not already chosen\n";
				error = 1;
				i--;
			}
		}
		if (error != 0)
			continue;
		else
			playerChoice.push_back(choice);
	}

	srand(time(0));

	vector<int> chosenNum;
	cout << "Your chosen Numbers are:\n";
	for (int a : playerChoice)
		cout << a << "\t";

	cout << "\nThe chosen Numbers are:\n";
	for (int i = 0; i < num; i++) {
		int x = rand() % 100;
		cout << x << "\t";
		chosenNum.push_back(x);
	}

	int counter = 0;

	for (int y : playerChoice) {
		for (int x : chosenNum) {
			if (x == y)
				counter++;
		}
	}

	double payout = 1;

	for (int i = 0; i < counter; i++)
		payout *= bet;

	bank += payout;
	return payout;
}

int getBet() {
	while (1 < 2) {
		cout << "Enter your bet or bet -1 to exit.\n";
		char ch;
		cin >> ch;
		while (isdigit(ch) == false) {
			cout << "Please enter a number positive whole number greater than 1\n";
			cin >> ch;
		}
		cin.putback(ch);
		int bet;
		cin >> bet;

		if (bet > bank) {
			cout << "Please do not enter more than you have";
			continue;
		}

		if (bet == -1)
			return bet;

		if (bet < 0){
			cout << "Please enter a number positive whole number greater than 1\n";
			continue;
	}
		
		bank -= bet;
		return bet;
	}
}

void showBoard() {
	for (int i = 1; i < 101; i++) {
		cout << i << "\t";
		if (i % 10 == 0)
			cout << endl;
	}
}

int getDifficulty() {
	while (1 < 2) {
		cout << "Enter how many numbers to be picked ";
		char ch;
		cin >> ch;
		while (isdigit(ch) == false) {
			cout << "Please enter a number positive whole number greater than 1\n";
			cin >> ch;
		}
		cin.putback(ch);
		int diff;
		cin >> diff;
		if (diff > 10) {
			cout << "Please enter a number less than 10";
			continue;
		}
		if (diff < 0) {
			cout << "Please enter a number positive whole number greater than 1\n";
			continue;
		}
		return diff;
	}

}
