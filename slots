#include "pch.h"
#include <iostream>
#include <vector>
#include <ctime>
#include <iomanip>


int getBet();
void spinWheel(int diff, int loop);
void playSlots();
int getUserInput();

using namespace std;

double bank = 50;

int main()
{
	playSlots();
	system("pause");
}

void playSlots() {
	int cash = bank;
	srand(time(0));
	int bet = getBet();
	spinWheel(bet, 1);
	cout << "\n\t\tYou now have $" << bank;
	if (cash < bank)
		cout << " You earned $" << setprecision(4) << bank - cash << "!\n";
	else
		cout << " You lost $" << setprecision(4) << cash - bank << ".\n";
}

int getBet()

{
	cout << "Choose bet ammount:\n1  :  $0.01\n2  :  $0.05\n3  :  $0.10\n4  :  $0.25\n5  :  $0.50\n6  :  $1.00\n";
	
	while (1 < 2) {
		int bet = getUserInput();
		if (bet < 1 || bet > 6) {
			cout << "\nPlease enter a number shown above.\n";
			continue;
		}
		return bet;
	}
	
}

void spinWheel(int diff, int loop)

{
	int winCounter = 1;
	int difficulty = diff;
	vector<double> cashVals = { 0.01, 0.05, 0.1, 0.25, 0.5, 1 };

	while (loop == 1) {
		cout << "\n\n\t\t\tPress 1 to spin.\n\t\t  Press any other key to exit. ";
		char ch;
		cin >> ch;
		while (isdigit(ch) == false)
		{
			break;
		}
		cin.putback(ch);
		int loop;
		cin >> loop;
		if (loop != 1)
			break;

		int spin1 = rand() % 16 + 224;
		int spin2 = rand() % 16 + 224;
		int spin3 = rand() % 16 + 224;
		int spin4 = rand() % 16 + 224;
		int spin5 = rand() % 16 + 224;

		cout << endl << "\t\t" << static_cast<char>(spin1 + 1) << '\t' << static_cast<char>(spin2 + 1) << '\t' << static_cast<char>(spin3 + 1) << '\t' << static_cast<char>(spin4 + 1) << '\t' << static_cast<char>(spin5 + 1) << endl << endl;
		cout << "\t\t" << static_cast<char>(spin1) << '\t' << static_cast<char>(spin2) << '\t' << static_cast<char>(spin3) << '\t' << static_cast<char>(spin4) << '\t' << static_cast<char>(spin5) << endl << endl;
		cout << "\t\t" << static_cast<char>(spin1 - 1) << '\t' << static_cast<char>(spin2 - 1) << '\t' << static_cast<char>(spin3 - 1) << '\t' << static_cast<char>(spin4 - 1) << '\t' << static_cast<char>(spin5 - 1) << endl << endl;

		double cashAdded = 0;

		int win = 0;

		if (spin1 == spin2 && spin2 == spin3 && spin3 == spin4 && spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 81;
			bank += cashAdded;
			cout << "\t\t\tJackpot!\n You matched 4 pairs! You earned $" << setprecision(2) << cashAdded << "!";
			cout << "\t\t\t\t\tYou now have $" << bank << endl;
			win = 1;
		}

		if (spin1 == spin2 && spin2 == spin3 && spin3 == spin4) {
			cashAdded = cashVals[diff - 1] * 27;
			bank += cashAdded;
			cout << "\tYou matched 3 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin1 == spin2 && spin2 == spin3 && spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 27;
			bank += cashAdded;
			cout << "\tYou matched 3 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin1 == spin2 && spin3 == spin4 && spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 27;
			bank += cashAdded;
			cout << "\tYou matched 3 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin2 == spin3 && spin3 == spin4 && spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 27;
			bank += cashAdded;
			cout << "\tYou matched 3 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin1 == spin2 && spin2 == spin3) {
			cashAdded = cashVals[diff - 1] * 9;
			bank += cashAdded;
			cout << "\tYou matched 2 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin2 == spin3 && spin3 == spin4) {
			cashAdded = cashVals[diff - 1] * 9;
			bank += cashAdded;
			cout << "\tYou matched 2 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin3 == spin4 && spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 9;
			bank += cashAdded;
			cout << "\tYou matched 2 pairs. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin1 == spin2) {
			cashAdded = cashVals[diff - 1] * 3;
			bank += cashAdded;
			cout << "\tYou matched 1 pair. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin2 == spin3) {
			cashAdded = cashVals[diff - 1] * 3;
			bank += cashAdded;
			cout << "\tYou matched 1 pair. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin3 == spin4) {
			cashAdded = cashVals[diff - 1] * 3;
			bank += cashAdded;
			cout << "\tYou matched 1 pair. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
		}

		if (spin4 == spin5) {
			cashAdded = cashVals[diff - 1] * 3;
			bank += cashAdded;
			cout << "\tYou matched 1 pair. You earned $" << cashAdded << "!";
			cout << " You now have $" << bank << endl;
			win = 1;
			
		}

		if (bank > 0 && win == 0) {
			cashAdded = cashVals[diff - 1] * -1;
			bank += cashAdded;
			cout << "\tYou matched 0 pairs. You lost $" << setprecision(4) << cashAdded * -1 << "!";
			cout << " You now have $" << setprecision(4) << bank << endl;
			continue;
		}

		else {
			if(win == 0)
				cout << "\t\tYou matched no pairs. You have $" << bank << endl;
			continue;
		}


	}

}

int getUserInput() {
	char ch;
	cin >> ch;
	while (isdigit(ch) == false) {
		cout << "Please enter a number.";
		cin >> ch;
	}
	cin.putback(ch);
	int choice;
	cin >> choice;
	return choice;
}
